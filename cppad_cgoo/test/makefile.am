# -----------------------------------------------------------------------------
# CppAD: C++ Algorithmic Differentiation: Copyright (C) 2011 Ciengis
#
# CppAD is distributed under multiple licenses. This distribution is under
# the terms of the 
#                     Common Public License Version 1.0.
#
# A copy of this license is included in the COPYING file of this distribution.
# Please visit http://www.coin-or.org/CppAD/ for information on other licenses.
# -----------------------------------------------------------------------------
# automake input file
#
# CppAD puts all it's preprocessor definitions in the cppad/configure.hpp
DEFS          =
#
EIGEN_INCLUDE     = -I/usr/include/eigen3/
#
check_PROGRAMS    = testCGOO
#
AM_CXXFLAGS       = -g $(CXX_FLAGS) \
                    $(CXX_FLAGS_EIGEN)	            
#
AM_CPPFLAGS       = -I. \
                    -I$(top_srcdir) \
                    -I$(top_srcdir)/cppad_cgoo/src/ \
                    $(BOOST_INCLUDE) \
                    $(EIGEN_INCLUDE)
#
LDADD             = -ldl
#
AM_LDFLAGS        = -L../
#
testCGOO_SOURCES        = \
	gcc_load_dynamic.hpp  \
	TestException.hpp \
	\
	test_code_gen.cpp \
	abs.cpp \
	acos.cpp \
	add.cpp \
	asin.cpp \
	assign.cpp \
	atan.cpp \
	atan_2.cpp \
	compare_change.cpp \
	cond_exp.cpp \
	cos.cpp \
	cosh.cpp \
	div.cpp \
	exp.cpp \
	log.cpp \
	log_10.cpp \
	mul.cpp \
	parameter.cpp \
	pow.cpp \
	sin.cpp \
	sub.cpp \
	tan.cpp \
	unary.cpp \
	gcc_load_dynamic.cpp \
	dynamic.cpp \
	dae_index_reduction/dummy_derivative.cpp \
	dae_index_reduction/pantelides.cpp \
	TestException.cpp

#	handler_reset.cpp


test.sh: testCGOO$(EXEEXT)
	echo "#! /bin/sh -e"                          > test.sh
	echo "if [ ! -d tmp ] ; then mkdir tmp ; fi" >> test.sh
	echo "./testCGOO "                           >> test.sh
	echo "rm -r tmp;" >> test.sh
	chmod +x test.sh

test: test.sh
	./test.sh
